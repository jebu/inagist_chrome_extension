<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="lib/3rdparty/jquery.js"></script>

<title>inagist.com Options</title>
</head>
<body>
  <h1> inagist.com Options </h1>
  <div>
    <table>
      <tr>
        <td>User Id : </td>
        <td><input type="text" name="iconnecteduser" onChange="saveValues(); reconnect();"/></td>
      </tr>
      <tr>
        <td>Alert Time : </td>
        <td><input type="text" name="ialerttime" onChange="saveValues();"/></td>
      </tr>
      <tr>
        <td>Auto Close : </td>
        <td><input type="checkbox" name="iautoclose" onChange="saveValues();"/></td>
      </tr>
      <tr>
        <td>Auto Track Trends : </td>
        <td><input type="checkbox" name="iautotracktrends" onChange="saveValues();"/></td>
      </tr>
      <tr>
        <td>Auto Track Channel Trends : </td>
        <td><input type="checkbox" name="iautotrackchanneltrends" onChange="saveValues();"/></td>
      </tr>
      <tr>
        <td>Use Secure Connection : </td>
        <td><input type="checkbox" name="iencrypt" onChange="saveValues(); reconnect();"/></td>
      </tr>
      <tr>
        <td>Search Terms : </td>
        <td><textarea name="isearch" cols="80" rows="5" onChange="saveValues(); reloadSearch();"></textarea></td>
      </tr>
      <tr>
        <td>Ignored Trends : </td>
        <td><textarea name="iignored" cols="80" rows="5" onChange="saveValues(); reloadSearch();"></textarea></td>
      </tr>
    </table>
  </div>
<script>
  var Options = chrome.extension.getBackgroundPage().Options;
  $("input[name='iconnecteduser']")[0].value = Options.get("userid");
  $("input[name='ialerttime']")[0].value = Options.get("alertTimeout");
  $("textarea[name='isearch']")[0].value = Options.get("searchText");
  $("textarea[name='iignored']")[0].value = Options.get("ignoredTrends");
  $("input[name='iautoclose']")[0].checked = Options.getBoolean("autoClose");
  $("input[name='iautotracktrends']")[0].checked = Options.getBoolean("autoTrackTrends");
  $("input[name='iautotrackchanneltrends']")[0].checked = Options.getBoolean("autoTrackChannelTrends");
  $("input[name='iencrypt']")[0].checked = Options.getBoolean("encrypt");
  function saveValues() {
    Options.set("userid", $("input[name='iconnecteduser']")[0].value);
    Options.set("alertTimeout", $("input[name='ialerttime']")[0].value);
    Options.set("searchText", $("textarea[name='isearch']")[0].value);
    Options.set("ignoredTrends", $("textarea[name='iignored']")[0].value);
    Options.set("autoClose", $("input[name='iautoclose']")[0].checked);
    Options.set("autoTrackTrends", $("input[name='iautotracktrends']")[0].checked);
    Options.set("autoTrackChannelTrends", $("input[name='iautotrackchanneltrends']")[0].checked);
    Options.set("encrypt", $("input[name='iencrypt']")[0].checked);
  }
  function reloadSearch() {
    chrome.extension.getBackgroundPage().sendSearchTerms();
  }
  function reconnect() {
    chrome.extension.getBackgroundPage().reConnect();
  }
</script>
</body>
</html>
